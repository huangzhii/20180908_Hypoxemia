getwd()
setwd("/Users/zhi/Desktop/Cong_Feng/20180908_Hypoxemia")
# setwd("/Users/zhi/Desktop/Cong_Feng/20180908_Hypoxemia")
read.csv("./data/mimic_mimiciii_hypoxemia_vitalsign1_3.csv")
# setwd("/Users/zhi/Desktop/Cong_Feng/20180908_Hypoxemia")
vitalsign1_3 = read.csv("./data/mimic_mimiciii_hypoxemia_vitalsign1_3.csv")
View(vitalsign1_3)
vitalsign1_3[1,1]
# setwd("/Users/zhi/Desktop/Cong_Feng/20180908_Hypoxemia")
vitalsign1_3 = read.csv("./data/mimic_mimiciii_hypoxemia_vitalsign1_3.csv", header = FALSE)
View(vitalsign1_3)
# setwd("/Users/zhi/Desktop/Cong_Feng/20180908_Hypoxemia")
vitalsign1_3 = read.csv("./data/mimic_mimiciii_hypoxemia_vitalsign1_3.csv", header = T)
View(vitalsign1_3)
?read.csv
vitalsign2_3 = read.csv("./data/mimic_mimiciii_hypoxemia_vitalsign2_3.csv", header = T)
colnames(vitalsign1_3)
colnames(vitalsign2_3)
View(vitalsign1_3)
vitalsign1_3
vitalsign1_3$vitalsign_charttime
mpg
mts
iris
iris$Species
vitalsign1_3$temp = vitalsign1_3$vitalsign_charttime - vitalsign1_3$po260_first_charttime
vitalsign1_3$temp = vitalsign1_3$vitalsign_charttime - vitalsign1_3$po260_first_charttime
vitalsign1_3$vitalsign_charttime
vitalsign1_3$po260_first_charttime
View(vitalsign1_3)
vitalsign1_3$vitalsign_charttime - vitalsign1_3$po260_first_charttime
abs(vitalsign1_3$vitalsign_charttime - vitalsign1_3$po260_first_charttime)
vitalsign1_3$temp = abs(vitalsign1_3$vitalsign_charttime - vitalsign1_3$po260_first_charttime)
View(vitalsign1_3)
1:17144
for(i in 1:17144){
print(i)
}
for(i in 1:17144){
print(vitalsign1_3$temp[i])
}
for(i in 1:17144){
print(vitalsign1_3$icustay_id)
# print(vitalsign1_3$temp[i])
}
for(i in 1:17144){
print(vitalsign1_3$icustay_id[i])
# print(vitalsign1_3$temp[i])
}
validRows = list()
previousID = 0
validRows = list()
activeI = 1
for(i in 1:17144){
currentID = vitalsign1_3$icustay_id[i]
currentValue = vitalsign1_3$temp[i]
if (currentID == previousID){
if(currentValue < prevousValue){
activeI = i
}
}
previousID = currentID
prevousValue = currentValue
# validRows = rbind(validRows, activeI)
# print(vitalsign1_3$temp[i])
}
for(i in 1:17144){
currentID = vitalsign1_3$icustay_id[i]
currentValue = vitalsign1_3$temp[i]
if (currentID == previousID){
if(currentValue < prevousValue){
activeI = i
print(activeI)
}
}
previousID = currentID
prevousValue = currentValue
# validRows = rbind(validRows, activeI)
# print(vitalsign1_3$temp[i])
}
currentValue
for(i in 1:17144){
currentID = vitalsign1_3$icustay_id[i]
currentValue = vitalsign1_3$temp[i]
if (currentID == previousID){
if(currentValue < previousValue){
activeI = i
print(activeI)
}
}
previousID = currentID
previousValue = currentValue
# validRows = rbind(validRows, activeI)
# print(vitalsign1_3$temp[i])
}
previousID = 0
previousValue = 999
validRows = list()
activeI = 1
for(i in 1:17144){
currentID = vitalsign1_3$icustay_id[i]
currentValue = vitalsign1_3$temp[i]
if (currentID == previousID){
if(currentValue < previousValue){
activeI = i
print(activeI)
}
}
previousID = currentID
previousValue = currentValue
# validRows = rbind(validRows, activeI)
# print(vitalsign1_3$temp[i])
}
previousValue
currentValue
previousID = 0
previousValue = 999
validRows = list()
activeI = 1
currentID = vitalsign1_3$icustay_id[i]
currentID
currentValue = vitalsign1_3$temp[i]
currentValue
currentID == previousID
if (currentID == previousID){
if(currentValue < previousValue){
activeI = i
print(activeI)
}
}
previousID = currentID
previousValue = currentValue
i = 2
currentID = vitalsign1_3$icustay_id[i]
currentID
previousID
View(vitalsign1_3)
vitalsign1_3$icustay_id
vitalsign1_3$icustay_id[1]
vitalsign1_3$icustay_id[2]
currentID = vitalsign1_3$icustay_id[i]
currentID
previousID
previousID = 0
previousValue = 999
validRows = list()
activeI = 1
currentID = vitalsign1_3$icustay_id[i]
currentValue = vitalsign1_3$temp[i]
if (currentID == previousID){
if(currentValue < previousValue){
activeI = i
print(activeI)
}
}
previousID = currentID
previousValue = currentValue
i = 2
previousID
currentID
currentID = vitalsign1_3$icustay_id[i]
currentID
currentValue = vitalsign1_3$temp[i]
currentValue
currentID == previousID
currentValue < previousValue
View(vitalsign1_3)
previousValue
currentValue
vitalsign1_3$temp[i]
previousValue = 999
previousID = 0
previousValue = 999
validRows = list()
activeI = 1
currentID = vitalsign1_3$icustay_id[i]
currentValue = vitalsign1_3$temp[i]
if (currentID == previousID){
if(currentValue < previousValue){
activeI = i
print(activeI)
}
}
previousID = currentID
previousValue = currentValue
previousValue
View(vitalsign1_3)
i
i = 1
previousID = 0
previousValue = 999
validRows = list()
activeI = 1
i = 1
currentID = vitalsign1_3$icustay_id[i]
currentValue = vitalsign1_3$temp[i]
if (currentID == previousID){
if(currentValue < previousValue){
activeI = i
print(activeI)
}
}
previousID = currentID
previousValue = currentValue
i = 2
currentID = vitalsign1_3$icustay_id[i]
currentValue = vitalsign1_3$temp[i]
currentID == previousID
currentValue
previousValue
currentValue < previousValue
currentID = vitalsign1_3$icustay_id[i]
currentValue = vitalsign1_3$temp[i]
if (currentID == previousID){
if(currentValue < previousValue){
activeI = i
print(activeI)
}
}
previousID = 0
validRows = list()
activeI = 1
i = 2
for(i in 1:17144){
currentID = vitalsign1_3$icustay_id[i]
currentValue = vitalsign1_3$temp[i]
if (currentID != previousID){
smallestValue = 999
} else {
if(currentValue < smallestValue){
activeI = i
print(activeI)
}
}
previousID = currentID
# validRows = rbind(validRows, activeI)
# print(vitalsign1_3$temp[i])
}
previousID = 0
validRows = list()
activeI = 1
for(i in 1:17144){
currentID = vitalsign1_3$icustay_id[i]
currentValue = vitalsign1_3$temp[i]
if (currentID != previousID){
smallestValue = 999
} else {
if(currentValue < smallestValue){
smallestValue = currentValue
activeI = i
print(activeI)
}
}
previousID = currentID
# validRows = rbind(validRows, activeI)
# print(vitalsign1_3$temp[i])
}
previousID = 0
validRows = list()
for(i in 1:17144){
currentID = vitalsign1_3$icustay_id[i]
currentValue = vitalsign1_3$temp[i]
if (currentID != previousID){
smallestValue = 999
activeI = i
print(activeI)
} else {
if (currentValue < smallestValue){
smallestValue = currentValue
activeI = i
print(activeI)
}
}
previousID = currentID
# validRows = rbind(validRows, activeI)
# print(vitalsign1_3$temp[i])
}
View(vitalsign1_3)
i = 1
currentID = vitalsign1_3$icustay_id[i]
currentValue = vitalsign1_3$temp[i]
if (currentID != previousID){
smallestValue = 999
activeI = i
print(activeI)
} else {
if (currentValue < smallestValue){
smallestValue = currentValue
activeI = i
print(activeI)
}
}
previousID = currentID
i = 22
i=2
currentID = vitalsign1_3$icustay_id[i]
currentValue = vitalsign1_3$temp[i]
if (currentID != previousID){
smallestValue = 999
activeI = i
print(activeI)
} else {
if (currentValue < smallestValue){
smallestValue = currentValue
activeI = i
print(activeI)
}
}
currentID != previousID
currentValue < smallestValue
i=1
vitalsign1_3[i,]
vitalsign1_3.complete = final[complete.cases(vitalsign1_3), ]
vitalsign1_3.complete = vitalsign1_3[complete.cases(vitalsign1_3), ]
View(vitalsign1_3.complete)
vitalsign1_3.complete = vitalsign1_3.complete[vitalsign1_3.complete$vitalsign_charttime < vitalsign1_3.complete$po260_first_charttime]
vitalsign1_3.complete = vitalsign1_3.complete[vitalsign1_3.complete$vitalsign_charttime < vitalsign1_3.complete$po260_first_charttime, ]
vitalsign1_3.complete$vitalsign_charttime
vitalsign1_3.complete$vitalsign_charttime < vitalsign1_3.complete$po260_first_charttime
vitalsign1_3.complete = vitalsign1_3.complete[vitalsign1_3.complete$vitalsign_charttime > 0,]
vitalsign1_3.complete$temp = vitalsign1_3.complete$vitalsign_charttime - vitalsign1_3.complete$po260_first_charttime
View(vitalsign1_3.complete)
vitalsign1_3.complete$temp = vitalsign1_3.complete$po260_first_charttime - vitalsign1_3.complete$vitalsign_charttime
View(vitalsign1_3.complete)
View(vitalsign1_3.complete)
vitalsign1_3.complete <- vitalsign1_3.complete[order(temp),]
typeof(vitalsign1_3.complete)
vitalsign1_3.complete = data.frame(vitalsign1_3.complete)
vitalsign1_3.complete <- vitalsign1_3.complete[order(temp),]
# 20180908 Zhi Huang
library("dplyr")
arrange(vitalsign1_3.complete, temp)
arrange(vitalsign1_3.complete, desc(temp))
vitalsign1_3.sorted = arrange(vitalsign1_3.complete, desc(temp))
View(vitalsign1_3.sorted)
vitalsign1_3.sorted = arrange(vitalsign1_3.complete, temp)
vitalsign1_3.sorted[!duplicated(vitalsign1_3.sorted$icustay_id),]
vitalsign1_3.final = vitalsign1_3.sorted[!duplicated(vitalsign1_3.sorted$icustay_id),]
View(vitalsign1_3.sorted)
View(vitalsign1_3.final)
vitalsign1_3.final = arrange(vitalsign1_3.final, icustay_id)
View(vitalsign1_3.final)
names(vitalsign1_3.final)
vitalsign1_3.final = vitalsign1_3.final[, -which(names(vitalsign1_3.final) %in% c("po260_first_charttime","vitalsign_charttime", "intime"))]
View(vitalsign1_3.final)
vitalsign1_3.final = vitalsign1_3.final[, -which(names(vitalsign1_3.final) %in% c("po260_first_charttime","vitalsign_charttime", "intime", "temp"))]
View(vitalsign1_3.final)
vitalsign2_3.complete = vitalsign1_3[complete.cases(vitalsign2_3), ]
View(vitalsign2_3.complete)
vitalsign2_3 = read.csv("./data/mimic_mimiciii_hypoxemia_vitalsign2_3.csv", header = T)
vitalsign2_3.complete = vitalsign2_3[complete.cases(vitalsign2_3), ]
View(vitalsign2_3.complete)
View(vitalsign2_3)
vitalsign2_3.complete = vitalsign2_3.complete[vitalsign2_3.complete$vitalsign_charttime > 0,]
vitalsign2_3.complete = vitalsign2_3[complete.cases(vitalsign2_3), ]
vitalsign2_3.complete = vitalsign2_3.complete[vitalsign2_3.complete$vitalsign_charttime > 0,]
vitalsign2_3.sorted = arrange(vitalsign2_3.complete, vitalsign_charttime)
View(vitalsign2_3.sorted)
vitalsign2_3.final = vitalsign2_3.sorted[!duplicated(vitalsign2_3.sorted$icustay_id),]
View(vitalsign2_3.final)
vitalsign2_3.final = arrange(vitalsign2_3.final, icustay_id)
vitalsign2_3.final = vitalsign2_3.final[, -which(names(vitalsign2_3.final) %in% c("vitalsign_charttime", "intime"))]
View(vitalsign2_3.final)
#preprocessing finised
vitalsign2_3.final$isHypoxemia = 0
View(vitalsign2_3.final)
#preprocessing finised
vitalsign1_3.final$isHypoxemia = 1
vitalsign2_3.final$isHypoxemia = 0
vitalsign.all = rbind(vitalsign1_3.final, vitalsign2_3.final)
View(vitalsign.all)
write.csv(vitalsign.all, "./data/vitalsign.all.csv")
